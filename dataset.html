<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>D3 Page Template</title>
    <link rel="stylesheet" href="index.css">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://d3js.org/d3-geo-projection.v2.min.js"></script>
    <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
</head>
<body>
<script src="js/moment.min.js"></script>
<script type="text/javascript">



/*
    var rowConverter = function (d) {
        return {
            report_date: d.report_date, //No conversion
            province: d.province,
            health_zone: d.health_zone,
            confirmed_cases: d.confirmed_cases
        };
    };

    d3.json("data/csvjson.json", rowConverter, function (data) {
        d3.select("body").selectAll("p")
            .data(data)
            .enter()
            .append("p")
            .text(function (d) {
                if (d.confirmed_cases>100)
                    console.log(d.report_date+","+d.province+","+d.health_zone+"||"+d.confirmed_cases);

            })
    });
*/
    d3.json("data/csvjson.json", function(json) {
        let sum = 0;
        for (let i = 0; i < json.length; i++){
            if (json[i].confirmed_cases>200){
                //console.log(json[0].report_date);
                let d = new Date(json[i].report_date);
                let dayWrapper = moment(d).format("DD");
                let monthWrapper = moment(d).format("MM");
                let yearWrapper = moment(d).format("YYYY");
                let datum = moment(d).format("DD-MM-YYYY");
               // console.log("Datum: " +dayWrapper + "-" + monthWrapper + "-" + yearWrapper + " == " + json[i].province)
                if(json[i].province === "North Kivu" && yearWrapper === "2019" && monthWrapper === "07"){
                    sum += json[i].confirmed_cases;

                    console.log(json[i].confirmed_cases + "==" + datum + " " + json[i].province);
                }

            }
        }
        console.log("Summme: " +sum)
    });



</script>
</body>
</html>